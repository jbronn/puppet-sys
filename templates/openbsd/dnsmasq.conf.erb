# Auto-generated by Puppet with sys::openbsd::dnsmasq.
# Do not modify.

<% if @except_interfaces.count > 0
     @except_interfaces.each do | interface | -%>
except-interface=<%= interface %>
<%   end
   end
   if @interfaces.count > 0
     @interfaces.each do | interface | -%>
interface=<%= interface %>
<%   end
   end
   if @listen_addresses.count > 0
     @listen_addresses.each do | listen_address | -%>
listen-address=<%= listen_address %>
<%   end
   end
   if @no_dhcp_interfaces.count > 0
     @no_dhcp_interfaces.each do | interface | -%>
no-dhcp-interface=<%= interface %>
<%   end
   end -%>

# DNS Settings
<% if @domain -%>
domain=<%= @domain %>
<% end -%>
<% if @expand_hosts -%>
expand-hosts
<% end -%>
cache-size=<%= @cache_size %>
no-resolv
<% @forwarders.each do | forwarder | -%>
server=<%= forwarder %>
<% end -%>
<% @networks.keys.sort.each do | network_key |
     network = @networks[network_key]
     network['hosts'].keys.sort.each do | hostname |
       if network['hosts'][hostname].key?('cname') -%>
cname=<%= hostname %>,<%= network['hosts'][hostname]['cname'] %>
<%     end
     end
   end -%>

# DHCP Settings
<% if @authoritative -%>
dhcp-authoritative
<% end -%>
<% @networks.keys.sort.each do | network_key |
     network = @networks[network_key]
     network['ranges'].each_with_index do | dhcp_range,index | -%>
dhcp-range=set:<%= network_key %><%= index %>,<%= dhcp_range.join(',') %>,<% if network.key?('lease') %><%= network['lease'] %><% else %><%= @default_lease %><% end %>
<%   end
     network['hosts'].keys.sort.each do | hostname |
       if network['hosts'][hostname].key?('mac') -%>
dhcp-host=<%= network['hosts'][hostname]['mac'] %>,<%= hostname %>,infinite<% if network['hosts'][hostname].key?('tag') %>,set:<%= network['hosts'][hostname]['tag'] %><% end %>
<%     else -%>
dhcp-host=<%= hostname %>
<%     end
     end
   end

   if @extra -%>

<%= @extra %>
<% end -%>
